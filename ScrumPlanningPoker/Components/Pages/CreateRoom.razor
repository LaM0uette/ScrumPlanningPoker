@page "/CreateRoom"
@attribute [RenderModeInteractiveServer]
@inject IJSRuntime JSRuntime
@inject NavigationManager NavigationManager

<h2>Create a New Room</h2>

<button @onclick="Create">Create Room</button>

@if (!string.IsNullOrEmpty(roomLink))
{
    <p>Room Link: <a href="@roomLink">@roomLink</a></p>
}

@code {
    private string roomLink;

    private async Task Create()
    {
        var roomName = GenerateUniqueRoomName();
        roomLink = NavigationManager.BaseUri + $"JoinRoom/{roomName}";
        
        await JSRuntime.InvokeVoidAsync("displayMessageInConsole", $"Room link: {roomLink}");
    }

    private static string GenerateUniqueRoomName()
    {
        return Guid.NewGuid().ToString("N");
    }
}